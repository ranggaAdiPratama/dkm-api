{"version":3,"sources":["webpack:///./src/views/Admins/Chats.vue?a831","webpack:///src/views/Admins/Chats.vue","webpack:///./src/views/Admins/Chats.vue?c536","webpack:///./src/views/Admins/Chats.vue?ddcf","webpack:///./src/views/Admins/Chats.vue?8853"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","isDevice","theme","_v","_e","directives","name","rawName","value","expression","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","currentUserId","multiple","_l","user","key","_id","domProps","_s","username","_m","attrs","users","showDemoOptions","staticRenderFns","component"],"mappings":"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","file":"js/views-Admins-Chats.dbfd432a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"app-container\",class:{ 'app-mobile': _vm.isDevice, 'app-mobile-dark': _vm.theme === 'dark' }},[(_vm.showOptions)?_c('span',{staticClass:\"user-logged\",class:{ 'user-logged-dark': _vm.theme === 'dark' }},[_vm._v(\" Logged as \")]):_vm._e(),(_vm.showOptions)?_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentUserId),expression:\"currentUserId\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.currentUserId=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.users),function(user){return _c('option',{key:user._id,domProps:{\"value\":user._id}},[_vm._v(\" \"+_vm._s(user.username)+\" \")])}),0):_vm._e(),(_vm.showOptions)?_c('div',{staticClass:\"button-theme\"},[_c('button',{staticClass:\"button-light\",on:{\"click\":function($event){_vm.theme = 'light'}}},[_vm._v(\" Light \")]),_c('button',{staticClass:\"button-dark\",on:{\"click\":function($event){_vm.theme = 'dark'}}},[_vm._v(\" Dark \")]),_vm._m(0)]):_vm._e(),(_vm.showChat)?_c('chat-container',{attrs:{\"current-user-id\":_vm.currentUserId,\"theme\":_vm.theme,\"is-device\":_vm.isDevice,\"data\":_vm.users},on:{\"show-demo-options\":function($event){_vm.showDemoOptions = $event}}}):_vm._e()],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"button-github\"},[_c('a',{attrs:{\"href\":\"https://github.com/antoine92190/vue-advanced-chat\"}},[_c('img',{attrs:{\"src\":\"\"}})])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div\n      class=\"app-container\"\n      :class=\"{ 'app-mobile': isDevice, 'app-mobile-dark': theme === 'dark' }\"\n    >\n      <span\n        v-if=\"showOptions\"\n        class=\"user-logged\"\n        :class=\"{ 'user-logged-dark': theme === 'dark' }\"\n      >\n        Logged as\n      </span>\n      <select\n        v-if=\"showOptions\"\n        v-model=\"currentUserId\"\n      >\n        <option\n          v-for=\"user in users\"\n          :key=\"user._id\"\n          :value=\"user._id\"\n        >\n          {{ user.username }}\n        </option>\n      </select>\n\n      <div\n        v-if=\"showOptions\"\n        class=\"button-theme\"\n      >\n        <button\n          class=\"button-light\"\n          @click=\"theme = 'light'\"\n        >\n          Light\n        </button>\n        <button\n          class=\"button-dark\"\n          @click=\"theme = 'dark'\"\n        >\n          Dark\n        </button>\n        <button class=\"button-github\">\n          <a href=\"https://github.com/antoine92190/vue-advanced-chat\">\n            <img src=\"\">\n          </a>\n        </button>\n      </div>\n\n      <chat-container\n        v-if=\"showChat\"\n        :current-user-id=\"currentUserId\"\n        :theme=\"theme\"\n        :is-device=\"isDevice\"\n        :data=\"users\"\n        @show-demo-options=\"showDemoOptions = $event\"\n      />\n\n    <!-- <div class=\"version-container\">\n      v1.0.0\n    </div> -->\n    </div>\n  </div>\n</template>\n\n<script>\n  import axios from 'axios'\n  import { roomsRef, usersRef } from '@/firestore'\n  import ChatContainer from './ChatContainer.vue'\n\n  export default {\n    components: {\n      ChatContainer,\n    },\n\n    data () {\n      return {\n        theme: 'light',\n        showChat: true,\n        users: [],\n        isDevice: false,\n        showDemoOptions: true,\n        updatingData: false,\n        currentUserId: '2',\n      }\n    },\n\n    computed: {\n      showOptions () {\n        return !this.isDevice || this.showDemoOptions\n      },\n    },\n\n    watch: {\n      currentUserId () {\n        this.showChat = false\n        setTimeout(() => (this.showChat = true), 150)\n      },\n    },\n\n    mounted () {\n      this.isDevice = window.innerWidth < 500\n      window.addEventListener('resize', ev => {\n        if (ev.isTrusted) this.isDevice = window.innerWidth < 500\n      })\n\n      this.getData()\n    },\n\n    methods: {\n      resetData () {\n        roomsRef.get().then(val => {\n          val.forEach(async val => {\n            const ref = roomsRef.doc(val.id).collection('messages')\n\n            await ref.get().then(res => {\n              if (res.empty) return\n              res.docs.map(doc => ref.doc(doc.id).delete())\n            })\n\n            roomsRef.doc(val.id).delete()\n          })\n        })\n        usersRef.get().then(val => {\n          val.forEach(val => {\n            usersRef.doc(val.id).delete()\n          })\n        })\n      },\n\n      getData () {\n        const u = []\n        axios.get('customer').then((res) => {\n          const d = res.data.data\n          d.forEach(item => {\n            u.push({\n              _id: item.id,\n              username: item.name,\n              avatar: this.$baseUrl + item.photo,\n            })\n          })\n\n          this.users = u\n          this.addData()\n        })\n      },\n      async addData () {\n        this.updatingData = true\n        for (let index = 0; index < this.users.length; index++) {\n          const user = this.users[index]\n          await usersRef.doc(user._id).set(user)\n        }\n\n        // await roomsRef.add({\n        //   users: [user1._id, user2._id],\n        //   lastUpdated: new Date(),\n        // })\n        // await roomsRef.add({\n        //   users: [user1._id, user3._id],\n        //   lastUpdated: new Date(),\n        // })\n        // await roomsRef.add({\n        //   users: [user2._id, user3._id],\n        //   lastUpdated: new Date(),\n        // })\n        // await roomsRef.add({\n        //   users: [user1._id, user2._id, user3._id],\n        //   lastUpdated: new Date(),\n        // })\n\n        this.updatingData = false\n      },\n    },\n  }\n</script>\n\n<style lang=\"scss\">\nbody {\nbackground: #fafafa;\nmargin: 0;\n}\n\ninput {\n-webkit-appearance: none;\n}\n\n.app-container {\nfont-family: 'Quicksand', sans-serif;\npadding: 20px 30px 30px;\n}\n\n.app-mobile {\npadding: 0;\n\n&.app-mobile-dark {\nbackground: #131415;\n}\n\n.user-logged {\nmargin: 10px 5px 0 10px;\n}\nselect {\nmargin: 10px 0;}\n.button-theme {\nmargin: 10px 10px 0 0;\n\n.button-github {\nheight: 23px;\n\nimg {\nheight: 23px;\n}\n}}\n}\n\n.user-logged {\nfont-size: 12px;\nmargin-right: 5px;\nmargin-top: 10px;\n\n&.user-logged-dark {\ncolor: #fff;\n}\n}\n\nselect {\nheight: 20px;\noutline: none;\nborder: 1px solid #e0e2e4;\nborder-radius: 4px;\nbackground: #fff;\nmargin-bottom: 20px;\n}\n\n.button-theme {\nfloat: right;\ndisplay: flex;\nalign-items: center;\n\n.button-light {\n  background: #fff;\n  border: 1px solid #46484e;\n  color: #46484e;\n}\n\n.button-dark {\n  background: #1c1d21;\n  border: 1px solid #1c1d21;\n}\n\nbutton {\n  color: #fff;\n  outline: none;\n  cursor: pointer;\n  border-radius: 4px;\n  padding: 6px 12px;\n  margin-left: 10px;\n  border: none;\n  font-size: 14px;\n  transition: 0.3s;\n  vertical-align: middle;\n\n  &.button-github {\n    height: 30px;\n    background: none;\n    padding: 0;\n    margin-left: 20px;\n\n    img {\n      height: 30px;\n    }\n  }\n\n  &:hover {\n    opacity: 0.8;\n  }\n\n  &:active {\n    opacity: 0.6;\n  }\n\n  @media only screen and (max-width: 768px) {\n    padding: 3px 6px;\n    font-size: 13px;\n  }\n}\n}\n\n.version-container {\npadding-top: 20px;\ntext-align: right;\nfont-size: 14px;\ncolor: grey;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chats.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chats.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chats.vue?vue&type=template&id=ae908ff8&\"\nimport script from \"./Chats.vue?vue&type=script&lang=js&\"\nexport * from \"./Chats.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chats.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chats.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}